"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = {
    async end(giveawayRepo, msg) {
        await msg.fetch();
        giveawayRepo.delete({ message: msg.id });
        const reaction = await msg.reactions.cache.filter(r => r.emoji.name === "ðŸŽ‰").first().fetch();
        await reaction.users.fetch();
        const winner = reaction.users.cache.filter(w => !w.bot).random();
        const emded = msg.embeds[0];
        emded.setFooter("Giveaway Ended");
        emded.setColor("RED");
        emded.addField("Winner:", winner ? `${winner} (${winner.tag})` : "No Winners :(");
        msg.edit(emded);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2l2ZWF3YXlNYW5nZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc3RydWN0dXJlcy9naXZlYXdheXMvR2l2ZWF3YXlNYW5nZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSxrQkFBZTtJQUNYLEtBQUssQ0FBQyxHQUFHLENBQUMsWUFBbUMsRUFBRSxHQUFZO1FBQ3ZELE1BQU0sR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2xCLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFekMsTUFBTSxRQUFRLEdBQW9CLE1BQU0sR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDL0csTUFBTSxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzdCLE1BQU0sTUFBTSxHQUFTLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRXZFLE1BQU0sS0FBSyxHQUFpQixHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEtBQUssQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNsQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RCLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEtBQUssTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNsRixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXBCLENBQUM7Q0FDSixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWVzc2FnZSwgTWVzc2FnZUVtYmVkLCBNZXNzYWdlUmVhY3Rpb24sIFVzZXIgfSBmcm9tIFwiZGlzY29yZC5qc1wiO1xyXG5pbXBvcnQgeyBSZXBvc2l0b3J5IH0gZnJvbSBcInR5cGVvcm1cIjtcclxuaW1wb3J0IHsgR2l2ZWF3YXlzIH0gZnJvbSBcIi4uLy4uL21vZGVscy9HaXZlYXdheXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGFzeW5jIGVuZChnaXZlYXdheVJlcG86IFJlcG9zaXRvcnk8R2l2ZWF3YXlzPiwgbXNnOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgYXdhaXQgbXNnLmZldGNoKCk7XHJcbiAgICAgICAgZ2l2ZWF3YXlSZXBvLmRlbGV0ZSh7IG1lc3NhZ2U6IG1zZy5pZCB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVhY3Rpb246IE1lc3NhZ2VSZWFjdGlvbiA9IGF3YWl0IG1zZy5yZWFjdGlvbnMuY2FjaGUuZmlsdGVyKHIgPT4gci5lbW9qaS5uYW1lID09PSBcIvCfjolcIikuZmlyc3QoKS5mZXRjaCgpO1xyXG4gICAgICAgIGF3YWl0IHJlYWN0aW9uLnVzZXJzLmZldGNoKCk7XHJcbiAgICAgICAgY29uc3Qgd2lubmVyOiBVc2VyID0gcmVhY3Rpb24udXNlcnMuY2FjaGUuZmlsdGVyKHcgPT4gIXcuYm90KS5yYW5kb20oKTtcclxuXHJcbiAgICAgICAgY29uc3QgZW1kZWQ6IE1lc3NhZ2VFbWJlZCA9IG1zZy5lbWJlZHNbMF07XHJcbiAgICAgICAgZW1kZWQuc2V0Rm9vdGVyKFwiR2l2ZWF3YXkgRW5kZWRcIik7XHJcbiAgICAgICAgZW1kZWQuc2V0Q29sb3IoXCJSRURcIik7XHJcbiAgICAgICAgZW1kZWQuYWRkRmllbGQoXCJXaW5uZXI6XCIsIHdpbm5lciA/IGAke3dpbm5lcn0gKCR7d2lubmVyLnRhZ30pYCA6IFwiTm8gV2lubmVycyA6KFwiKTtcclxuICAgICAgICBtc2cuZWRpdChlbWRlZCk7XHJcblxyXG4gICAgfVxyXG59Il19