"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const discord_akairo_1 = require("discord-akairo");
const discord_js_1 = require("discord.js");
class report extends discord_akairo_1.Command {
    constructor() {
        super("report", {
            aliases: ["report", "r"],
            category: "Public",
            description: {
                content: "Reports a user",
                usage: "report",
                examples: [
                    "report @user reason"
                ]
            },
            ratelimit: 3,
            args: [
                {
                    id: "member",
                    type: "member",
                    prompt: {
                        start: (msg) => `${msg.author}, please provide a member to report...`,
                        retry: (msg) => `${msg.author}, please provide a valid member to report...`
                    }
                },
                {
                    id: "reason",
                    type: "string",
                    match: "rest",
                    default: "No reason provided"
                }
            ]
        });
    }
    async exec(message, { member, reason }) {
        const channel = message.member.guild.channels.cache.find(channel => channel.name === "logs");
        const reporter = message.author;
        let confirm = new discord_js_1.MessageEmbed()
            .setColor('YELLOW')
            .setTitle(`Confirm Report`)
            .setDescription(`${reporter} are you shure you want to report ${member} for ${reason}`);
        let thankyou = new discord_js_1.MessageEmbed()
            .setColor(`GREEN`)
            .setDescription(`Thanks for the report ${reporter} staff will look into it!`);
        let report = new discord_js_1.MessageEmbed()
            .setColor('RED')
            .setAuthor(`${message.guild.name} ModLogs`, message.guild.iconURL())
            .setFooter(`${message.guild.name} ModLogs`, message.guild.iconURL())
            .addField(`Moderation:`, 'Report')
            .addField(`Reporter:`, reporter)
            .addField(`Reported:`, member)
            .addField(`Reason:`, reason)
            .addField(`Date:`, message.createdAt.toLocaleString())
            .setThumbnail(message.guild.iconURL({ dynamic: true }));
        message.channel.send(confirm).then(async (msg) => {
            msg.react('üëç');
            msg.react('üëé');
            const filter = (reaction, user) => {
                return ['üëç', 'üëé'].includes(reaction.emoji.name) && user.id === message.author.id;
            };
            msg.awaitReactions(filter, { max: 1, time: 60000, errors: ['time'] })
                .then(collected => {
                const reaction = collected.first();
                if (reaction.emoji.name === 'üëç') {
                    channel.send(report);
                    message.author.send(thankyou);
                    message.delete();
                    msg.delete();
                }
                if (reaction.emoji.name === 'üëé') {
                    message.delete();
                    msg.delete();
                }
            });
        });
    }
}
exports.default = report;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3J0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1hbmRzL1B1YmxpYy9yZXBvcnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBeUM7QUFDekMsMkNBQTZFO0FBSTdFLE1BQXFCLE1BQU8sU0FBUSx3QkFBTztJQUN2QztRQUNJLEtBQUssQ0FBQyxRQUFRLEVBQUU7WUFDWixPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDO1lBQ3hCLFFBQVEsRUFBRSxRQUFRO1lBQ2xCLFdBQVcsRUFBRTtnQkFDVCxPQUFPLEVBQUUsZ0JBQWdCO2dCQUN6QixLQUFLLEVBQUUsUUFBUTtnQkFDZixRQUFRLEVBQUU7b0JBQ04scUJBQXFCO2lCQUN4QjthQUNKO1lBQ0QsU0FBUyxFQUFFLENBQUM7WUFDWixJQUFJLEVBQUU7Z0JBQ0Y7b0JBQ0ksRUFBRSxFQUFFLFFBQVE7b0JBQ1osSUFBSSxFQUFFLFFBQVE7b0JBQ2QsTUFBTSxFQUFFO3dCQUNKLEtBQUssRUFBRSxDQUFDLEdBQVksRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSx3Q0FBd0M7d0JBQzlFLEtBQUssRUFBRSxDQUFDLEdBQVksRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSw4Q0FBOEM7cUJBQ3ZGO2lCQUNKO2dCQUNEO29CQUNJLEVBQUUsRUFBRSxRQUFRO29CQUNaLElBQUksRUFBRSxRQUFRO29CQUNkLEtBQUssRUFBRSxNQUFNO29CQUNiLE9BQU8sRUFBRSxvQkFBb0I7aUJBQ2hDO2FBQ0o7U0FDSixDQUFDLENBQUE7SUFDTixDQUFDO0lBRU0sS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFnQixFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBMkM7UUFDM0YsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxD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Q0FBQyxDQUFBO1FBQ1YsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBQ0o7QUFuRkQseUJBbUZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCJkaXNjb3JkLWFrYWlyb1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlRW1iZWQsIFRleHRDaGFubmVsLCBHdWlsZE1lbWJlciB9IGZyb20gXCJkaXNjb3JkLmpzXCI7XHJcbmltcG9ydCB7IHByb21pc2VzIH0gZnJvbSBcImZzXCI7XHJcbmltcG9ydCB7IEd1aWxkTWFuYWdlciB9IGZyb20gXCJkaXNjb3JkLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyByZXBvcnQgZXh0ZW5kcyBDb21tYW5kIHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcInJlcG9ydFwiLCB7XHJcbiAgICAgICAgICAgIGFsaWFzZXM6IFtcInJlcG9ydFwiLCBcInJcIl0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcIlB1YmxpY1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJSZXBvcnRzIGEgdXNlclwiLFxyXG4gICAgICAgICAgICAgICAgdXNhZ2U6IFwicmVwb3J0XCIsXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAgICAgIFwicmVwb3J0IEB1c2VyIHJlYXNvblwiXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJhdGVsaW1pdDogMyxcclxuICAgICAgICAgICAgYXJnczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBcIm1lbWJlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibWVtYmVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAobXNnOiBNZXNzYWdlKSA9PiBgJHttc2cuYXV0aG9yfSwgcGxlYXNlIHByb3ZpZGUgYSBtZW1iZXIgdG8gcmVwb3J0Li4uYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IChtc2c6IE1lc3NhZ2UpID0+IGAke21zZy5hdXRob3J9LCBwbGVhc2UgcHJvdmlkZSBhIHZhbGlkIG1lbWJlciB0byByZXBvcnQuLi5gXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogXCJyZWFzb25cIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoOiBcInJlc3RcIixcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIk5vIHJlYXNvbiBwcm92aWRlZFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBleGVjKG1lc3NhZ2U6IE1lc3NhZ2UsIHsgbWVtYmVyLCByZWFzb24gfTogeyBtZW1iZXI6IEd1aWxkTWVtYmVyLCByZWFzb246IHN0cmluZyB9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBjaGFubmVsID0gbWVzc2FnZS5tZW1iZXIuZ3VpbGQuY2hhbm5lbHMuY2FjaGUuZmluZChjaGFubmVsID0+IGNoYW5uZWwubmFtZSA9PT0gXCJsb2dzXCIpO1xyXG4gICAgICAgIGNvbnN0IHJlcG9ydGVyID0gbWVzc2FnZS5hdXRob3I7XHJcblxyXG4gICAgICAgIGxldCBjb25maXJtID0gbmV3IE1lc3NhZ2VFbWJlZCgpXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcignWUVMTE9XJylcclxuICAgICAgICAgICAgLnNldFRpdGxlKGBDb25maXJtIFJlcG9ydGApXHJcbiAgICAgICAgICAgIC5zZXREZXNjcmlwdGlvbihgJHtyZXBvcnRlcn0gYXJlIHlvdSBzaHVyZSB5b3Ugd2FudCB0byByZXBvcnQgJHttZW1iZXJ9IGZvciAke3JlYXNvbn1gKTtcclxuXHJcbiAgICAgICAgbGV0IHRoYW5reW91ID0gbmV3IE1lc3NhZ2VFbWJlZCgpXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcihgR1JFRU5gKVxyXG4gICAgICAgICAgICAuc2V0RGVzY3JpcHRpb24oYFRoYW5rcyBmb3IgdGhlIHJlcG9ydCAke3JlcG9ydGVyfSBzdGFmZiB3aWxsIGxvb2sgaW50byBpdCFgKTtcclxuXHJcblxyXG4gICAgICAgIGxldCByZXBvcnQgPSBuZXcgTWVzc2FnZUVtYmVkKClcclxuICAgICAgICAgICAgLnNldENvbG9yKCdSRUQnKVxyXG4gICAgICAgICAgICAuc2V0QXV0aG9yKGAke21lc3NhZ2UuZ3VpbGQubmFtZX0gTW9kTG9nc2AsIG1lc3NhZ2UuZ3VpbGQuaWNvblVSTCgpKVxyXG4gICAgICAgICAgICAuc2V0Rm9vdGVyKGAke21lc3NhZ2UuZ3VpbGQubmFtZX0gTW9kTG9nc2AsIG1lc3NhZ2UuZ3VpbGQuaWNvblVSTCgpKVxyXG4gICAgICAgICAgICAuYWRkRmllbGQoYE1vZGVyYXRpb246YCwgJ1JlcG9ydCcpXHJcbiAgICAgICAgICAgIC5hZGRGaWVsZChgUmVwb3J0ZXI6YCwgcmVwb3J0ZXIpXHJcbiAgICAgICAgICAgIC5hZGRGaWVsZChgUmVwb3J0ZWQ6YCwgbWVtYmVyKVxyXG4gICAgICAgICAgICAuYWRkRmllbGQoYFJlYXNvbjpgLCByZWFzb24pXHJcbiAgICAgICAgICAgIC5hZGRGaWVsZChgRGF0ZTpgLCBtZXNzYWdlLmNyZWF0ZWRBdC50b0xvY2FsZVN0cmluZygpKVxyXG4gICAgICAgICAgICAuc2V0VGh1bWJuYWlsKG1lc3NhZ2UuZ3VpbGQuaWNvblVSTCh7IGR5bmFtaWM6IHRydWUgfSkpO1xyXG5cclxuICAgICAgICBtZXNzYWdlLmNoYW5uZWwuc2VuZChjb25maXJtKS50aGVuKGFzeW5jIG1zZyA9PiB7XHJcbiAgICAgICAgICAgIG1zZy5yZWFjdCgn8J+RjScpXHJcbiAgICAgICAgICAgIG1zZy5yZWFjdCgn8J+RjicpXHJcblxyXG5cclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gKHJlYWN0aW9uLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWyfwn5GNJywgJ/CfkY4nXS5pbmNsdWRlcyhyZWFjdGlvbi5lbW9qaS5uYW1lKSAmJiB1c2VyLmlkID09PSBtZXNzYWdlLmF1dGhvci5pZDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1zZy5hd2FpdFJlYWN0aW9ucyhmaWx0ZXIsIHsgbWF4OiAxLCB0aW1lOiA2MDAwMCwgZXJyb3JzOiBbJ3RpbWUnXSB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY29sbGVjdGVkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFjdGlvbiA9IGNvbGxlY3RlZC5maXJzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVhY3Rpb24uZW1vamkubmFtZSA9PT0gJ/CfkY0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChjaGFubmVsIGFzIFRleHRDaGFubmVsKS5zZW5kKHJlcG9ydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXV0aG9yLnNlbmQodGhhbmt5b3UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5kZWxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYWN0aW9uLmVtb2ppLm5hbWUgPT09ICfwn5GOJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cuZGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59Il19